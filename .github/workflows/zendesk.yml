on:
  push:
    branches:
      - 'main'

jobs:
  Publish:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repositiory
        uses: actions/checkout@v2

      - name: Setup Node
        uses: actions/setup-node@v2
        with:
          node-version: 15

      - name: Publish README.md to ZenDesk
        run: |
          curl https://searchspring.zendesk.com/api/v2/help_center/articles/360059001311/translations/en-us.json \
          -d "`npx showdown makehtml -i README.md | jq -Rs '{"translation": {"title": "Snap Quickstart", "body": . }}'`" \
          -u ${{ secrets.ZenDeskAPIAuthUsername }}:${{ secrets.ZenDeskAPIAuthPassword }} -X PUT -H "Content-Type: application/json"